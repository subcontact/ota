di={version:"0.3.3",createContext:function(){function t(e){while(e.indexOf(" ")>=0)e=e.replace(" ","");return e}var e={map:{}};e.entry=function(t){return e.map[t]};e.register=function(t,n,r){var i=di.entry(t,e).type(n).args(r);e.map[t]=i;return i};e.has=function(t){return e.entry(t)!=null};e.get=function(t){if(e.has(t))return e.entry(t).object();else throw"Object["+t+"] is not registered"};e.create=function(t,n){if(e.entry(t).strategy()!=di.strategy.proto)throw"Attempt to create singleton object";if(e.has(t))return e.entry(t).create(n);else throw"Object["+t+"] is not registered"};e.initialize=function(){for(var t in e.map){if(e.map.hasOwnProperty(t)){var n=e.entry(t);e.ready(e.inject(t,e.get(t),n.dependencies()))}}};e.clear=function(){this.map={}};e.inject=function(n,r,i){i=i?i:r.dependencies;if(r&&i){var s=t(i).split(",");s.forEach(function(t){if(t){var i=di.dependencyExpression(t);var s=e.get(i.name);if(s==null)throw"Dependency ["+n+"."+i.property+"]->["+i.name+"] can not be satisfied";r[i.property]=s}})}return r};e.ready=function(e){if(typeof e.ready==="function")e.ready();return e};return e},dependencyExpression:function(e){var t={};var n=e;var r=e;if(e.indexOf("=")>0){var i=e.split("=");n=i[0];r=i[1]}t.name=r;t.property=n;return t},entry:function(e,t){var n={};var e;var r;var i;var s=di.strategy.singleton;var o;var u=di.factory.constructor;var a;n.create=function(n){return s(e,i,u,r,n?n:o,t,a)};n.object=function(e){if(!arguments.length){i=n.create();return i}else{i=e;return n}};n.strategy=function(e){if(!arguments.length)return s;s=e;return n};n.type=function(e){if(!arguments.length)return r;r=e;return n};n.dependencies=function(e){if(!arguments.length)return a;a=e;return n};n.args=function(e){if(!arguments.length)return o;o=e;return n};n.factory=function(e){if(!arguments.length)return u;u=e;return n};return n},strategy:{proto:function(e,t,n,r,i,s,o){t=n(r,i);return s.ready(s.inject(e,t,o))},singleton:function(e,t,n,r,i,s,o){if(!t)t=n(r,i);return t}},factory:{constructor:function(type,args){if(args instanceof Array){return eval(di.utils.invokeStmt(args,"new"))}else{return new type(args)}},func:function(type,args){if(args instanceof Array){return eval(di.utils.invokeStmt(args))}else{return type(args)}}}};di.utils={};di.utils.invokeStmt=function(e,t){var n=t?t:"";n+=" type(";var r=0;for(;r<e.length;++r)n+="args["+r+"],";if(r>0)n=n.slice(0,n.length-1);n+=")";return n}